<header th:fragment="header" class="bn-header-container">
    <div class="bn-header-top-bar">
        <div class="bn-header-logo">
            <img th:src="@{/images/logobenhvien.png}" alt="Hospital Logo" class="bn-header-logo-img">
        </div>
        <div class="bn-header-contact-info">
            <p><i class="fas fa-map-marker-alt"></i> S·ªë 1 V√µ VƒÉn Ng√¢n, Th√†nh Ph·ªë Th·ªß ƒê·ª©c</p>
            <p><i class="fas fa-phone"></i> HOTLINE: 0901610273</p>
            <p><i class="fas fa-envelope"></i> Mail: 21110889@example.com</p>
        </div>
    </div>
    <nav class="bn-header-nav">
        <div class="bn-header-hamburger">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <ul class="bn-header-nav-list">
            <li class="bn-header-nav-item"><a th:href="@{/home}" class="bn-header-nav-link">Gi·ªõi Thi·ªáu</a></li>
            <li class="bn-header-nav-item bn-header-dropdown">
                <a class="bn-header-nav-link bn-header-dropdown-toggle">B√°c Sƒ©</a>
                <ul class="bn-header-dropdown-menu">
                    <li><a th:href="@{/view/schedule}" class="bn-header-dropdown-item">L·ªãch L√†m Vi·ªác</a></li>
                    <li><a th:href="@{/findbs}" class="bn-header-dropdown-item">ƒê·ªôi Ng≈© B√°c Sƒ©</a></li>
                </ul>
            </li>
            <li class="bn-header-nav-item"><a th:href="@{/departments}" class="bn-header-nav-link">Chuy√™n Khoa</a></li>
            <li class="bn-header-nav-item"><a th:href="@{/user/dangkylichkham}" class="bn-header-nav-link">ƒê·∫∑t L·ªãch Kh√°m</a></li>
            <li class="bn-header-nav-item"><a th:href="@{/user/lichsudatlich}" class="bn-header-nav-link">Xem L·ªãch H·∫πn</a></li>
            <li class="bn-header-nav-item"><a th:href="@{/user/lichsukhambenh}" class="bn-header-nav-link">L·ªãch S·ª≠ Kh√°m B·ªánh</a></li>
            <li class="bn-header-nav-item">
                <a th:href="@{/chat/msgbn}" class="bn-header-nav-link bn-header-chat-link">
                    <span class="bn-header-chat-icon">üí¨</span> Nh·∫Øn Tin
                </a>
            </li>
            <li class="bn-header-nav-item">
                <a th:href="@{/user/editprofile}" class="bn-header-nav-link bn-header-profile-link">
                    <img th:src="@{/images/logoeditprofile.png}" alt="Edit Profile" class="bn-header-profile-icon">
                    Th√¥ng Tin C√° Nh√¢n
                </a>
            </li>
            <li class="bn-header-nav-item">
                <div sec:authorize="isAuthenticated()">
                    <a th:href="@{/logout}" class="bn-header-nav-link bn-header-auth-link">ƒêƒÉng Xu·∫•t</a>
                </div>
                <div sec:authorize="!isAuthenticated()">
                    <a th:href="@{/login}" class="bn-header-nav-link bn-header-auth-link">ƒêƒÉng Nh·∫≠p</a>
                </div>
            </li>
        </ul>
    </nav>

    <style>
        :root {
            --primary-blue: #4fc3f7;
            --dark-blue: #0288d1;
            --light-blue: #e0f7fa;
            --white: #ffffff;
            --shadow: rgba(0, 0, 0, 0.1);
        }

        .bn-header-container {
            font-family: 'Poppins', Arial, sans-serif;
            background: var(--white);
            box-shadow: 0 2px 8px var(--shadow);
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
        }

        .bn-header-top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 20px;
            background: var(--light-blue);
        }

        .bn-header-logo-img {
            height: 45px;
            opacity: 1; /* Removed bounceIn for performance */
        }

        .bn-header-contact-info p {
            margin: 2px 0;
            font-size: 12px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .bn-header-contact-info i {
            color: var(--primary-blue);
        }

        .bn-header-nav {
            background: var(--primary-blue);
            padding: 8px 20px;
        }

        .bn-header-nav-list {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 12px;
            flex-wrap: nowrap;
        }

        .bn-header-nav-item {
            position: relative;
        }

        .bn-header-nav-link {
            color: var(--white);
            text-decoration: none;
            font-size: 13px;
            font-weight: 500;
            padding: 6px 10px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: background 0.2s ease, transform 0.2s ease; /* Simplified transitions */
            will-change: background, transform;
        }

        .bn-header-nav-link:hover {
            background: var(--dark-blue);
            transform: translateY(-2px);
        }

        .bn-header-dropdown .bn-header-dropdown-menu {
            visibility: hidden; /* Use visibility + opacity for better performance */
            position: absolute;
            top: 100%;
            left: 0;
            background: var(--white);
            box-shadow: 0 2px 6px var(--shadow); /* Lighter shadow */
            border-radius: 6px;
            min-width: 160px;
            z-index: 1001;
            opacity: 0;
            transform: translateY(-5px);
            transition: opacity 0.2s ease, transform 0.2s ease;
        }

        .bn-header-dropdown:hover .bn-header-dropdown-menu {
            visibility: visible;
            opacity: 1;
            transform: translateY(0);
        }

        .bn-header-dropdown-item {
            display: block;
            padding: 8px 15px;
            color: #333;
            text-decoration: none;
            font-size: 12px;
            transition: background 0.2s ease, color 0.2s ease;
        }

        .bn-header-dropdown-item:hover {
            background: var(--light-blue);
            color: var(--primary-blue);
        }

        .bn-header-chat-link {
            background: #28a745;
        }

        .bn-header-chat-link:hover {
            background: #218838;
        }

        .bn-header-chat-icon {
            font-size: 14px;
        }

        .bn-header-profile-icon {
            width: 16px;
            height: 16px;
        }

        .bn-header-auth-link {
            background: #dc3545;
        }

        .bn-header-auth-link:hover {
            background: #c82333;
        }

        .bn-header-hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
            gap: 4px;
        }

        .bn-header-hamburger span {
            width: 25px;
            height: 3px;
            background: var(--white);
            transition: transform 0.2s ease, opacity 0.2s ease;
        }

        .bn-header-hamburger.active span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }

        .bn-header-hamburger.active span:nth-child(2) {
            opacity: 0;
        }

        .bn-header-hamburger.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -7px);
        }

        body {
            padding-top: 120px !important;
        }

        @media (max-width: 768px) {
            .bn-header-top-bar {
                flex-direction: column;
                align-items: flex-start;
                gap: 6px;
                padding: 10px;
            }

            .bn-header-contact-info p {
                font-size: 11px;
            }

            .bn-header-hamburger {
                display: flex;
            }

            .bn-header-nav-list {
                display: none;
                flex-direction: column;
                align-items: flex-start;
                background: var(--primary-blue);
                position: absolute;
                top: 100%;
                left: 0;
                width: 100%;
                padding: 10px;
                box-shadow: 0 2px 6px var(--shadow);
            }

            .bn-header-nav-list.active {
                display: flex;
            }

            .bn-header-nav-item {
                width: 100%;
            }

            .bn-header-nav-link {
                width: 100%;
                padding: 10px;
                font-size: 14px;
            }

            .bn-header-dropdown .bn-header-dropdown-menu {
                visibility: hidden;
                position: static;
                background: var(--light-blue);
                width: 100%;
                opacity: 0;
                transform: none;
                transition: opacity 0.2s ease;
            }

            .bn-header-dropdown.active .bn-header-dropdown-menu {
                visibility: visible;
                opacity: 1;
            }

            body {
                padding-top: 140px !important;
            }
        }
    </style>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Cache DOM elements
            const hamburger = document.querySelector('.bn-header-hamburger');
            const navList = document.querySelector('.bn-header-nav-list');

            // Hamburger toggle
            hamburger.addEventListener('click', () => {
                navList.classList.toggle('active');
                hamburger.classList.toggle('active');
            });

            // Event delegation for dropdowns
            navList.addEventListener('click', (e) => {
                const toggle = e.target.closest('.bn-header-dropdown-toggle');
                if (toggle && window.innerWidth <= 768) {
                    e.preventDefault();
                    const parent = toggle.parentElement;
                    parent.classList.toggle('active');
                }
            });

            // Debounce resize for better performance
            let resizeTimeout;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(() => {
                    if (window.innerWidth > 768) {
                        navList.classList.remove('active');
                        hamburger.classList.remove('active');
                        document.querySelectorAll('.bn-header-dropdown').forEach(dropdown => {
                            dropdown.classList.remove('active');
                        });
                    }
                }, 100);
            });
        });
    </script>
</header>